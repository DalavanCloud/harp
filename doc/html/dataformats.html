

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data formats &mdash; HARP 0.1b documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="HARP 0.1b documentation" href="index.html"/>
        <link rel="next" title="Ingestion definitions" href="ingestions/index.html"/>
        <link rel="prev" title="Installation" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> HARP
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Data formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#harp-data-format">HARP data format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#file-naming">File naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-types">Data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dimensions">Dimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-attributes">Global attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-attributes">Variable attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#netcdf-3">netCDF-3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hdf4">HDF4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hdf5">HDF5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#collocation-result-file-format">Collocation result file format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ingestions/index.html">Ingestion definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="libharp.html">C library</a></li>
<li class="toctree-l1"><a class="reference internal" href="harpcheck.html">harpcheck</a></li>
<li class="toctree-l1"><a class="reference internal" href="harpcollocate.html">harpcollocate</a></li>
<li class="toctree-l1"><a class="reference internal" href="harpconvert.html">harpconvert</a></li>
<li class="toctree-l1"><a class="reference internal" href="harpdump.html">harpdump</a></li>
<li class="toctree-l1"><a class="reference internal" href="harpfilter.html">harpfilter</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">HARP</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Data formats</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-formats">
<h1>Data formats</h1>
<div class="section" id="harp-data-format">
<h2>HARP data format</h2>
<p>The HARP data format is a set of conventions for files stored in netCDF-3, HDF4, or HDF5 format. For performance and
sizing reasons it is recommended to use netCDF-3. The netCDF-4 format actually uses HDF5 underneath and is therefore
supported as an HDF5 file by HARP.</p>
<p>The HARP conventions can generally be combined with other conventions that do not contradict it. For instance, a file
can be compliant with both netCDF-CF and the HARP data format conventions at the same time.</p>
<p>In order for a product to be compliant with the HARP data format conventions it will need to have the <code class="docutils literal"><span class="pre">HARP-1.0</span></code> value
in the <code class="docutils literal"><span class="pre">Conventions</span></code> global attribute and follow the restrictions described in this section.</p>
<div class="section" id="file-naming">
<h3>File naming</h3>
<p>HARP puts no restrictions on the filename.</p>
</div>
<div class="section" id="data-types">
<h3>Data types</h3>
<p>HARP defines the following data types. See sections <a class="reference internal" href="#netcdf-3">netCDF-3</a>, <a class="reference internal" href="#hdf4">HDF4</a>, and <a class="reference internal" href="#hdf5">HDF5</a> for a detailed description of how
these data types are mapped to and from the data types supported by each file format.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="8%" />
<col width="3%" />
<col width="4%" />
<col width="18%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP data type</th>
<th class="head">C data type</th>
<th class="head">bits</th>
<th class="head">sign</th>
<th class="head">range</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>int8</td>
<td>int8_t</td>
<td>8</td>
<td>signed</td>
<td>[-128, 127]</td>
<td>signed 8-bit integer type (two&#8217;s complement representation)</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>int16_t</td>
<td>16</td>
<td>signed</td>
<td>[-32768, 32767]</td>
<td>signed 16-bit integer type (two&#8217;s complement representation)</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>int32_t</td>
<td>32</td>
<td>signed</td>
<td>[-2147483648, 2147483647]</td>
<td>signed 32-bit integer type (two&#8217;s complement representation)</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>float</td>
<td>32</td>
<td>signed</td>
<td>[-3.4E38, 3.4E38]</td>
<td>IEEE754 single-precision binary floating-point format (on supported platforms)</td>
</tr>
<tr class="row-even"><td>double</td>
<td>double</td>
<td>64</td>
<td>signed</td>
<td>[-1.7E308, 1.7E308]</td>
<td>IEEE754 double-precision binary floating-point format (on supported platforms)</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>char*</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>null-terminated ASCII string</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dimensions">
<h3>Dimensions</h3>
<p>HARP has strict rules regarding the dimensions of variables. Each dimension of a variable may be used to represent a
physical dimension (such as time, latitude, longitude, height, et cetera), or it may be used as an indepedent dimension.</p>
<p>Only dimension types supported by HARP can be used. These types are:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">time</span></code></dt>
<dd>Temporal dimension; this is also the only appendable dimension.</dd>
<dt><code class="docutils literal"><span class="pre">vertical</span></code></dt>
<dd>Vertical dimension, indicating height or depth.</dd>
<dt><code class="docutils literal"><span class="pre">spectral</span></code></dt>
<dd>Spectral dimension, associated with wavelength, wavenumber, or frequency.</dd>
<dt><code class="docutils literal"><span class="pre">latitude</span></code></dt>
<dd>Latitude dimension, only to be used for the latitude axis of a regular latitude x longitude grid.</dd>
<dt><code class="docutils literal"><span class="pre">longitude</span></code></dt>
<dd>Longitude dimension, only to be used for the longitude axis of a regular latitude x longitude grid.</dd>
<dt><code class="docutils literal"><span class="pre">independent</span></code></dt>
<dd>Independent dimension, used to index other quantities, such as the corner coordinates of ground pixel polygons.</dd>
</dl>
<p>Within a HARP product, all dimensions of the same type should have the same length, <em>except</em> independent dimensions. For
example, it is an error to have two variables within the same product that both have a time dimension, yet of a
different length.</p>
<p>A variable with more than one dimension has to use a fixed ordering of the dimensions. In the HARP documentation the
ordering is always documented using the so-called &#8216;C convention&#8217; for dimension ordering. Using the C convention, the
last dimension (writing from left to right) is the fastest running dimension when enumerating all elements, compared to
the Fortran convention, where the first dimension is the fastest running dimension. Note that different file access
libraries may have different conventions with regard to how they deal with array ordering in their function interfaces.</p>
<p>The order in which dimensions need to be provided for a variable is defined by the following rules:</p>
<blockquote>
<div><ul class="simple">
<li>If present, the <code class="docutils literal"><span class="pre">time</span></code> dimension is always the first (i.e. slowest running) dimension.</li>
<li>Next are categorial dimensions used for grouping. For instance, this can be the <code class="docutils literal"><span class="pre">spectral</span></code> dimension when it is
used to distinguish between retrievals performed using different choices of wavelength, or to distinguish data from
different spectral bands.</li>
<li>Next are the spatial dimensions, ordered as <code class="docutils literal"><span class="pre">latitude</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code>, <code class="docutils literal"><span class="pre">vertical</span></code>.</li>
<li>Next is the <code class="docutils literal"><span class="pre">spectral</span></code> dimension when it is used as an actual axis (e.g. for L1 spectral data for instruments that
measure along a spectral axis).</li>
<li>Any independent dimensions come last (i.e. they will always be the fastest running dimensions).</li>
</ul>
</div></blockquote>
<p>So, for a spectral axis used for grouping, the ordering should be:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">time</span></code>, <code class="docutils literal"><span class="pre">spectral</span></code>, <code class="docutils literal"><span class="pre">latitude</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code>, <code class="docutils literal"><span class="pre">vertical</span></code>, <code class="docutils literal"><span class="pre">independent</span></code></div></blockquote>
<p>And, for a spectral axis used for L1 data from spectral instruments, the ordering should be:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">time</span></code>, <code class="docutils literal"><span class="pre">latitude</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code>, <code class="docutils literal"><span class="pre">vertical</span></code>, <code class="docutils literal"><span class="pre">spectral</span></code>, <code class="docutils literal"><span class="pre">independent</span></code></div></blockquote>
<p>A variable should only use dimensions on which it is dependent. This means that the radiance variable for L1 data of a
nadir looking spectral instrument on a satellite will generally only have the dimensions <code class="docutils literal"><span class="pre">time</span></code> and <code class="docutils literal"><span class="pre">spectral</span></code> (and
not <code class="docutils literal"><span class="pre">latitude</span></code>, <code class="docutils literal"><span class="pre">longitude</span></code>, <code class="docutils literal"><span class="pre">vertical</span></code>, or <code class="docutils literal"><span class="pre">independent</span></code>).</p>
<p>Note that only a single grid can be used for each type of dimension per time value. This means that, for example, it is
possible to change the vertical grid from sample to sample. However, it is not possible to use different vertical grids
for the <em>same</em> sample.</p>
<p>To allow a different vertical grid from sample to sample, the <code class="docutils literal"><span class="pre">altitude</span></code> variable should have dimensions
<code class="docutils literal"><span class="pre">{time,vertical}</span></code> (instead of <code class="docutils literal"><span class="pre">{vertical}</span></code>). This way, the altitude values for the first sample, <code class="docutils literal"><span class="pre">altitude[0,:]</span></code>,
may differ from the altitude values for the second sample, <code class="docutils literal"><span class="pre">altitude[1,:]</span></code>, and so on. However, for an averaging
kernel, which has dimensions <code class="docutils literal"><span class="pre">{time,vertical,vertical}</span></code>, the altitude values for both vertical dimensions are
necessarily the same for each sample.</p>
<p>A grid that differs from sample to sample could have a different effective length per sample. This is implemented by
taking the maximum length over all samples as the length of the dimension and padding the dimension for each sample at
the end with &#8216;invalid&#8217; values (e.g. <code class="docutils literal"><span class="pre">NaN</span></code>). For instance, you can have an <code class="docutils literal"><span class="pre">altitude{time,vertical}</span></code> variable where
<code class="docutils literal"><span class="pre">altitude[0,:]</span></code> has 7 levels and equals <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">15,</span> <span class="pre">20,</span> <span class="pre">25,</span> <span class="pre">30]</span></code> and <code class="docutils literal"><span class="pre">altitude[1,:]</span></code> has only 6 levels and
equals <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">6,</span> <span class="pre">12,</span> <span class="pre">18,</span> <span class="pre">24,</span> <span class="pre">30,</span> <span class="pre">NaN]</span></code>.</p>
<p>Operations performed by HARP will determine the effective length of a dimension for each sample by ignoring all trailing
<code class="docutils literal"><span class="pre">NaN</span></code> values of the axis variable that is used for the operation (e.g. the <code class="docutils literal"><span class="pre">altitude</span></code> or <code class="docutils literal"><span class="pre">pressure</span></code> variable for a
vertical dimension or the <code class="docutils literal"><span class="pre">wavelength</span></code> or <code class="docutils literal"><span class="pre">wavenumber</span></code> variable for a spectral dimension).</p>
<p>Note that even though the <code class="docutils literal"><span class="pre">time</span></code> dimension is conceptually considered <cite>appendable</cite>, this dimension is not stored as an
actual appendable dimension in netCDF-3/HDF4/HDF5. Products are read/written from/to files in full and are only modified
in memory. The <cite>appendable</cite> aspect is only relevant for tools such as plotting routines that combine the data from a
series of HARP products in order to provide plots/statistics for a whole dataset (and thus, where data from different
files will have to be concatenated). Furthermore, storing data in a netCDF-3 file using an actual appendable dimension
(using the netCDF-3 definition of <cite>appendable dimension</cite>) will have a slightly lower read/write performance compared to
having all dimensions fixed.</p>
</div>
<div class="section" id="global-attributes">
<h3>Global attributes</h3>
<p>The HARP format defines the following global attributes:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">Conventions</span></code> string</dt>
<dd>This attribute should follow the netCDF convention and should contain <code class="docutils literal"><span class="pre">HARP-1.0</span></code> in its value to indicate that the
file conforms to the HARP data format conventions.</dd>
<dt><code class="docutils literal"><span class="pre">history</span></code> string (optional)</dt>
<dd>This attribute is used by all HARP tools to keep a trace of the operations performed on a product. Each time a command
is performed on a HARP file the full command line is appended to this attribute (using a newline separator between
commands). This usage is in line with the general conventions for this attribute.</dd>
<dt><code class="docutils literal"><span class="pre">source_product</span></code> string (optional)</dt>
<dd>This attribute will hold the name of the original product in case the HARP file was converted using <code class="docutils literal"><span class="pre">harpconvert</span></code>.
This approach makes it possible to use your own file naming approach for HARP files without losing trace of which
original product files the data came from.</dd>
<dt><code class="docutils literal"><span class="pre">datetime_start</span></code> double (optional)</dt>
<dd>This attribute is mandatory if the file is to be used with <code class="docutils literal"><span class="pre">harpcollocate</span></code>. It allows for quick extraction of the
time range of the product. The attribute should be a scalar double precision floating point value giving the
<code class="docutils literal"><span class="pre">datetime</span></code> of the first measurement as <code class="docutils literal"><span class="pre">days</span> <span class="pre">since</span> <span class="pre">2000-01-01</span></code> (using the fractional part to represent time-of-
day).</dd>
<dt><code class="docutils literal"><span class="pre">datetime_stop</span></code> double (optional)</dt>
<dd>This attribute is mandatory if the file is to be used with <code class="docutils literal"><span class="pre">harpcollocate</span></code>. It allows for quick extraction of the
time range of the product. The attribute should be a scalar double precision floating point value giving the
<code class="docutils literal"><span class="pre">datetime</span></code> of the last measurement as <code class="docutils literal"><span class="pre">days</span> <span class="pre">since</span> <span class="pre">2000-01-01</span></code> (using the fractional part to represent time-of-
day).</dd>
</dl>
</div>
<div class="section" id="variable-attributes">
<h3>Variable attributes</h3>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">description</span></code> string (optional)</dt>
<dd>This attribute provides a human readable description of the content of the variable. It should make clear what the
source of the data was (e.g. measured, climatology, derived, et cetera).</dd>
<dt><code class="docutils literal"><span class="pre">dims</span></code> string (optional)</dt>
<dd>This attribute stores the type of each dimension of the associated variable as a comma-separated list of dimension
type names. The number of dimension types should equal the number of dimensions of the variable. This attribute is
only present in HDF4 and HDF5 files, <em>not</em> in netCDF-3 files. See also sections <a class="reference internal" href="#hdf4">HDF4</a> and <a class="reference internal" href="#hdf5">HDF5</a>.</dd>
<dt><code class="docutils literal"><span class="pre">units</span></code> string (optional)</dt>
<dd>This attribute is used for data that has a physical unit. It should provide the unit in a form compatible with the
<code class="docutils literal"><span class="pre">udunits2</span></code> software.</dd>
<dt><code class="docutils literal"><span class="pre">valid_min</span></code> [int8, int16, int32, float, double] (optional)</dt>
<dd>Provides the minimum value below which the data is to be considered invalid. The data type of this attribute should
match the data type of the associated variable. This attribute is <em>not</em> allowed to be present for variables of type
<em>string</em>. For variables of numeric type, this attribute should only be present if the variable actually contains
values below this threshold that are to be interpreted as <cite>missing</cite> or <cite>invalid</cite> values.</dd>
<dt><code class="docutils literal"><span class="pre">valid_max</span></code> [int8, int16, int32, float, double] (optional)</dt>
<dd>Provides the maximum value above which the data is to be considered invalid. The data type of this attribute should
match the data type of the associated variable. This attribute is <em>not</em> allowed to be present for variables of type
<em>string</em>. For variables of numeric type, this attribute should only be present if the variable actually contains
values above this threshold that are to be interpreted as <cite>missing</cite> or <cite>invalid</cite> values.</dd>
</dl>
<p>Note that <code class="docutils literal"><span class="pre">_FillValue</span></code> is not used by HARP. Whether a value is valid is purely determined by the <code class="docutils literal"><span class="pre">valid_min</span></code> and
<code class="docutils literal"><span class="pre">valid_max</span></code> attributes.</p>
</div>
<div class="section" id="variables">
<h3>Variables</h3>
<p>A HARP variable is a named multi-dimensional array with associated attributes (see section <a class="reference internal" href="#variable-attributes">Variable attributes</a>). The
base type of a variable can be any of the data types supported by HARP (see section <a class="reference internal" href="#data-types">Data types</a>). A variable can have
zero or more dimensions. A variable with zero dimensions is a <em>scalar</em>. The maximum number of dimensions is 8. Each
dimension of a variable has a type that refers to one of the dimension types supported by HARP (see section
<a class="reference internal" href="#dimensions">Dimensions</a>). Dimensions of the same type should have the same length, <em>except</em> independent dimensions.</p>
<p>To allow HARP to perform automatic operations on variables, it imposes a strict naming convention for variables. This
naming convention applies to the variable name itself and is therefore fully complementary to naming conventions that
apply to the value of a variable attribute, such as <code class="docutils literal"><span class="pre">standard_name</span></code> (as specified by netCDF-CF).</p>
<p>HARP defines the following variable names:</p>
<p>The core variables are:</p>
<ul class="simple">
<li>absorbing_aerosol_index</li>
<li>aerosol_extinction_coefficient</li>
<li>aerosol_optical_depth</li>
<li>altitude</li>
<li>altitude_bounds</li>
<li>cloud_fraction</li>
<li>cloud_optical_thickness</li>
<li>cloud_top_albedo</li>
<li>cloud_top_height</li>
<li>cloud_top_pressure</li>
<li>surface_albedo</li>
<li>surface_pressure</li>
<li>collocation_index</li>
<li>datetime</li>
<li>datetime_start</li>
<li>datetime_stop</li>
<li>datetime_length</li>
<li>flag_am_pm</li>
<li>flag_day_twilight_night</li>
<li>frequency</li>
<li>geopotential_height</li>
<li>index</li>
<li>instrument_altitude</li>
<li>instrument_latitude</li>
<li>instrument_longitude</li>
<li>instrument_name</li>
<li>latitude</li>
<li>latitude_bounds</li>
<li>longitude</li>
<li>longitude_bounds</li>
<li>normalized_radiance</li>
<li>number_density</li>
<li>pressure</li>
<li>radiance</li>
<li>reflectance</li>
<li>relative_humidity</li>
<li>relative_azimuth_angle</li>
<li>scan_direction</li>
<li>scan_subset_counter</li>
<li>scanline_pixel_index</li>
<li>scattering_angle</li>
<li>site_name</li>
<li>solar_azimuth_angle</li>
<li>solar_elevation_angle</li>
<li>solar_irradiance</li>
<li>solar_zenith_angle</li>
<li>temperature</li>
<li>viewing_azimuth_angle</li>
<li>viewing_zenith_angle</li>
<li>virtual_temperature</li>
<li>wavelength</li>
<li>wavenumber</li>
<li>&lt;species&gt;_column_number_density</li>
<li>&lt;species&gt;_density</li>
<li>&lt;species&gt;_mass_mixing_ratio</li>
<li>&lt;species&gt;_mass_mixing_ratio_wet</li>
<li>&lt;species&gt;_number_density</li>
<li>&lt;species&gt;_partial_pressure</li>
<li>&lt;species&gt;_volume_mixing_ratio</li>
</ul>
<p>with supported species:</p>
<ul class="simple">
<li>BrO</li>
<li>C2H2</li>
<li>C2H6</li>
<li>CCl2F2</li>
<li>CCl3F</li>
<li>CF4</li>
<li>CH2O</li>
<li>CH3Cl</li>
<li>CH4</li>
<li>CHF2Cl</li>
<li>ClNO</li>
<li>ClONO2</li>
<li>ClO</li>
<li>CO2</li>
<li>COF2</li>
<li>CO</li>
<li>H2O_161</li>
<li>H2O_162</li>
<li>H2O_171</li>
<li>H2O_181</li>
<li>H2O2</li>
<li>H2O</li>
<li>HCl</li>
<li>HCN</li>
<li>HCOOH</li>
<li>HF</li>
<li>HO2NO2</li>
<li>HO2</li>
<li>HOCl</li>
<li>HNO3</li>
<li>N2O</li>
<li>N2O5</li>
<li>N2</li>
<li>NO2</li>
<li>NO3</li>
<li>NO</li>
<li>O2</li>
<li>O3_666</li>
<li>O3_667</li>
<li>O3_668</li>
<li>O3_686</li>
<li>O3</li>
<li>O4</li>
<li>OBrO</li>
<li>OClO</li>
<li>OCS</li>
<li>OH</li>
<li>SF6</li>
<li>SO2</li>
</ul>
<p>Specific height variants of the above variables:</p>
<ul class="simple">
<li>instrument_&lt;variable&gt;</li>
<li>stratospheric_&lt;variable&gt;</li>
<li>surface_&lt;variable&gt;</li>
<li>toa_&lt;variable&gt;</li>
<li>tropospheric_&lt;variable&gt;</li>
</ul>
<p>Specific ancillary variables for the atmospheric variables are:</p>
<ul class="simple">
<li>&lt;variable&gt;_apriori</li>
<li>&lt;variable&gt;_amf</li>
<li>&lt;variable&gt;_avk</li>
</ul>
<p>Generic ancillary variables for the above variables are:</p>
<ul class="simple">
<li>&lt;variable&gt;_cov</li>
<li>&lt;variable&gt;_cov_random</li>
<li>&lt;variable&gt;_cov_systematic</li>
<li>&lt;variable&gt;_stdev</li>
<li>&lt;variable&gt;_stdev_random</li>
<li>&lt;variable&gt;_stdev_systematic</li>
<li>&lt;variable&gt;_validity</li>
</ul>
</div>
<div class="section" id="netcdf-3">
<h3>netCDF-3</h3>
<p>This section details a set of additional conventions that are specific to the netCDF-3 file format.</p>
<p>The following table shows the mapping between HARP data types and netCDF-3 data types. NetCDF-3 data types not covered
in this table are not supported by HARP.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP data type</th>
<th class="head">netCDF-3 data type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>int8</td>
<td>NC_BYTE</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>NC_SHORT</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>NC_INT</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>NC_FLOAT</td>
</tr>
<tr class="row-even"><td>double</td>
<td>NC_DOUBLE</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>NC_CHAR</td>
</tr>
</tbody>
</table>
<p>The netCDF-3 data model defines the concept of a dimension. A netCDF-3 dimension has a name and a length. The name of a
dimension should be unique. The shape of a netCDF-3 variable is specified as a list of dimensions (instead of a list of
dimension <em>lengths</em>). This implies that to store a HARP product in netCDF-3 format, a netCDF-3 dimension should be
defined for each dimension present in the product. This is straight-forward for all dimension types supported by HARP,
except for independent dimensions (since HARP does not require that all independent dimensions have the same length).</p>
<p>For example, a variable may have an independent dimension of length 2, while another variable may have an independent
dimension of length 4. However, it is not possible to create two netCDF-3 dimensions called &#8216;independent&#8217; with different
lengths, because netCDF-3 requires dimension names to be unique. Instead, the netCDF-3 backend defines a netCDF-3
dimension for each independent dimension by appending the length to the name of the dimension to make it unique. The
name and the length are separated by an underscore. In the case of the example, two netCDF-3 dimensions would be
defined, one named &#8216;independent_2&#8217; and another named &#8216;independent_4&#8217;. Independent dimensions of the same length will be
represented by the same netCDF-3 dimension.</p>
<p>NetCDF-3 does not support strings. The netCDF-3 backend stores an N-dimensional HARP variable of type string as an
(N+1)-dimensional netCDF-3 variable of type NC_CHAR. The length of the introduced dimension equals the length of the
longest string, or 1 if the length of the longest string is zero. Shorter strings are padded will null-termination
characters.</p>
<p>Of course, netCDF-3 dimensions need to be defined for the introduced dimensions. This is handled in the same way as for
independent dimensions, by appending the length to the name of the dimension. The name and the length are separated by
an underscore. The name used for these introduced dimensions is &#8216;string&#8217;. For example, if the longest string has a
length of 10, a netCDF-3 dimension named &#8216;string_10&#8217; would be defined. String dimensions of the same length will be
represented by the same netCDF-3 dimension.</p>
<p>To summarize, HARP dimensions are mapped to netCDF-3 dimensions as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP dimension type</th>
<th class="head">netCDF-3 dimension name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>time</td>
</tr>
<tr class="row-odd"><td>latitude</td>
<td>latitude</td>
</tr>
<tr class="row-even"><td>longitude</td>
<td>longitude</td>
</tr>
<tr class="row-odd"><td>vertical</td>
<td>vertical</td>
</tr>
<tr class="row-even"><td>spectral</td>
<td>spectral</td>
</tr>
<tr class="row-odd"><td>independent</td>
<td>independent_&lt;length&gt;</td>
</tr>
<tr class="row-even"><td>N/A</td>
<td>string_&lt;length&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hdf4">
<h3>HDF4</h3>
<p>This section details a set of additional conventions that are specific to the HDF4 file format.</p>
<p>The following table shows the mapping between HARP data types and HDF4 data types. HDF4 data types not covered in this
table are not supported by HARP.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP data type</th>
<th class="head">HDF4 data type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>int8</td>
<td>DFNT_INT8</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>DFNT_INT16</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>DFNT_INT32</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>DFNT_FLOAT32</td>
</tr>
<tr class="row-even"><td>double</td>
<td>DFNT_FLOAT64</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>DFNT_CHAR</td>
</tr>
</tbody>
</table>
<p>The HDF4 data model does not define the concept of a dimension (unlike netCDF-3). The shape of an HDF4 dataset is
specified as a list of dimensions lengths.</p>
<p>When a HARP variable is stored as an HDF4 dataset, dimension lengths are preserved, but dimension types are lost. A
dataset attribute named &#8216;dims&#8217; is used to store the type of each dimension of the associated dataset as a comma-
separated list of dimension type names. The number of dimension types equals the number of dimensions of the HDF4
<em>dataset</em>. This number is equal to the number of dimensions of the HARP variable, <em>except</em> for scalar variables and
variables of type string (see below).</p>
<p>HDF4 does not support scalars (datasets with zero dimensions). The HDF4 backend stores a scalar HARP variable as an HDF4
dataset with a single dimension of length 1. To differentiate between scalars and proper 1-D variables, both of which
are stored as 1-D HDF4 datasets, the introduced dimension is included in the dimension type list using the dimension
type name &#8216;scalar&#8217;.</p>
<p>HDF4 does not support strings. The HDF4 backend stores an N-dimensional HARP variable of type string as an
(N+1)-dimensional HDF4 dataset of type DFNT_CHAR. The length of the introduced dimension equals the length of the
longest string, or 1 if the length of the longest string is zero. Shorter strings are padded with null-termination
characters. The introduced dimension is included in the dimension type list using the dimension type name &#8216;string&#8217;.</p>
<p>Thus, a scalar HARP variable of type string would be represented in HDF4 by a <strong>2</strong>-dimensional dataset of type
DFNT_CHAR. The length of the outer dimension would be 1, the length of the inner dimension would equal the length of the
string stored in the HARP variable. The &#8216;dims&#8217; attribute associated with this HDF4 dataset would contain the string
&#8216;scalar,string&#8217;.</p>
<p>To summarize, HARP dimensions types are mapped to dimension type names as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP dimension type</th>
<th class="head">dimension type name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>time</td>
</tr>
<tr class="row-odd"><td>latitude</td>
<td>latitude</td>
</tr>
<tr class="row-even"><td>longitude</td>
<td>longitude</td>
</tr>
<tr class="row-odd"><td>vertical</td>
<td>vertical</td>
</tr>
<tr class="row-even"><td>spectral</td>
<td>spectral</td>
</tr>
<tr class="row-odd"><td>independent</td>
<td>independent</td>
</tr>
<tr class="row-even"><td>N/A</td>
<td>scalar</td>
</tr>
<tr class="row-odd"><td>N/A</td>
<td>string</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hdf5">
<h3>HDF5</h3>
<p>This section details a set of additional conventions that are specific to the HDF5 file format.</p>
<p>The following table shows the mapping between HARP data types and HDF5 data types. The HDF5 backend uses this mapping
for writing only.</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HARP data type</th>
<th class="head">HDF5 data type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>int8</td>
<td>H5T_NATIVE_SCHAR</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>H5T_NATIVE_SHORT</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>H5T_NATIVE_INT</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>H5T_NATIVE_FLOAT</td>
</tr>
<tr class="row-even"><td>double</td>
<td>H5T_NATIVE_DOUBLE</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>H5T_C_S1</td>
</tr>
</tbody>
</table>
<p>The mapping used by the HDF5 backend for reading is shown below. The HDF5 data type interface (H5T) is used to
introspect the data type of the variable to be read.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="18%" />
<col width="18%" />
<col width="26%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">H5T_get_class()</th>
<th class="head">H5T_get_size()</th>
<th class="head">H5T_get_sign()</th>
<th class="head">H5Tget_native_type()</th>
<th class="head">HARP data type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>H5T_INTEGER</td>
<td>1</td>
<td>H5T_SGN_2</td>
<td>&nbsp;</td>
<td>int8</td>
</tr>
<tr class="row-odd"><td>H5T_INTEGER</td>
<td>2</td>
<td>H5T_SGN_2</td>
<td>&nbsp;</td>
<td>int16</td>
</tr>
<tr class="row-even"><td>H5T_INTEGER</td>
<td>4</td>
<td>H5T_SGN_2</td>
<td>&nbsp;</td>
<td>int32</td>
</tr>
<tr class="row-odd"><td>H5T_FLOAT</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>H5T_NATIVE_FLOAT</td>
<td>float</td>
</tr>
<tr class="row-even"><td>H5T_FLOAT</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>H5T_NATIVE_DOUBLE</td>
<td>double</td>
</tr>
<tr class="row-odd"><td>H5T_STRING</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>string</td>
</tr>
</tbody>
</table>
<p>HDF5 data types not covered in this table are not supported by HARP.</p>
<p>The HDF5 data model does not define the concept of a dimension (unlike netCDF-3). The shape of an HDF5 dataset is
specified as a list of dimensions lengths.</p>
<p>When a HARP variable is stored as an HDF5 dataset, dimension lengths are preserved, but dimension types are lost. A
dataset attribute named &#8216;dims&#8217; is used to store the type of each dimension of the associated dataset as a comma-
separated list of dimension type names. The number of dimension types equals the number of dimensions of the HARP
variable.</p>
<p>HDF5 can represent strings in several ways. Both fixed and variable length strings are supported. The HDF5 backend
stores a HARP variable of type string as an HDF5 dataset of fixed length strings. The fixed string length equals the
length of the longest string, or 1 if the length of the longest string is zero. Shorter strings are padded with null-
termination characters.</p>
</div>
</div>
<div class="section" id="collocation-result-file-format">
<h2>Collocation result file format</h2>
<p>The collocation result file is a simple comma separated (csv) file, containing the following columns:</p>
<dl class="docutils">
<dt>collocation_id</dt>
<dd>Unique id of the collocation pair. This id will correspond with the <code class="docutils literal"><span class="pre">collocation_index</span></code> variable inside HARP
products after they are filtered using a collocation result file.</dd>
<dt>filename_a</dt>
<dd>The filename of the original input file (i.e. <code class="docutils literal"><span class="pre">source_product</span></code> global attribute value) from the primary dataset.</dd>
<dt>measurement_id_a</dt>
<dd>A unique index number of the measurement within the file. This index number is based on the list of measurements from
the original input file and corresponds to the <code class="docutils literal"><span class="pre">index</span></code> variable inside HARP products.</dd>
<dt>filename_b</dt>
<dd>The filename of the original input file (i.e. <code class="docutils literal"><span class="pre">source_product</span></code> global attribute value) from the secondary dataset.</dd>
<dt>measurement_id_b</dt>
<dd>A unique index number of the measurement within the file. This index number is based on the list of measurements from
the original input file and corresponds to the <code class="docutils literal"><span class="pre">index</span></code> variable inside HARP products.</dd>
<dt>collocation criteria...</dt>
<dd>The remaining columns cover the collocation criteria that were provided to harpcollocate. For each collocation
criterium the column will provide the exact distance value for the given collocated measurement pair for that
criterium.</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ingestions/index.html" class="btn btn-neutral float-right" title="Ingestion definitions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 S&amp;T, The Netherlands.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1b',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>